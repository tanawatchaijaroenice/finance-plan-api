generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Month {
  id          Int       @id @default(autoincrement())
  name        String    // e.g. "January 2025" or "2025-01"
  totalIncome Decimal   @default(0.0) @db.Decimal(10, 2)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  
  expenses    Expense[]
}

model Category {
  id            Int       @id @default(autoincrement())
  name          String
  type          String    @default("EXPENSE") // EXPENSE, INCOME
  defaultAmount Decimal   @default(0.0) @db.Decimal(10, 2) // Template amount
  seqNo         Int       @default(99)
  
  expenses      Expense[]
}

model Account {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  type      String   // "CASH", "CREDIT_CARD", "SAVINGS"
  dueDate   Int?     // Day of month (1-31) for CREDIT_CARD
  
  expenses  Expense[]
}

model Expense {
  id         Int      @id @default(autoincrement())
  amount     Decimal  @db.Decimal(10, 2)
  note       String?
  status     String   @default("UNPAID")
  
  monthId    Int
  month      Month    @relation(fields: [monthId], references: [id])
  
  categoryId Int
  category   Category @relation(fields: [categoryId], references: [id])

  accountId  Int?
  account    Account? @relation(fields: [accountId], references: [id])

  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}
